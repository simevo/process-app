<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />

    <title>Simevo process app</title>
    <link href="css/custom.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Third-party JS -->
    <script type='text/javascript' src='js/knockout-3.1.0.js'></script>
    <script type='text/javascript' src='js/knockout.mapping.js'></script>
    <script type='text/javascript' src='js/knockout-projections.min.js'></script>
    <script type='text/javascript' src='js/undomanager.js'></script>

    <!-- Simevo-specific JS -->
    <script type='text/javascript' src='js/common.js'></script>

    <script type='text/javascript'>
      // init
      window.onload = init;
    </script>

  </head>
  <body>
    <div id="background">
      <div id="landing-page">

        <div id="logo">
          <!-- TODO remove this buttons for release version ! -->
          <button type="button" class="btn btn-success" onclick='reset_local_storage();'>
            <span class="glyphicon glyphicon-trash"></span>
          </button>
          <button type="button" class="btn btn-success" onclick='show_local_storage();'>
            <span class="glyphicon glyphicon-list-alt"></span>
          </button>
        </div>
        <!-- logo -->

        <div id="tab-container">
          <ul class="nav nav-tabs">
            <li class="active">
              <a id="recent-open" class="tab">Recent</a>
            </li>
            <li>
              <a id="new-open" class="tab">New</a>
            </li>
            <li>
              <a id="server-open" class="tab">Servers</a>
            </li>
          </ul>
          <!-- navigation -->

          <div id="recent-container" class="rns-container">
            <div id="container-recent-search" class="container">
              <form class="form">
                <div class="form-group has-feedback">
                  <input id="recent-search" type="text" class="form-control" placeholder="filter" data-bind="value: recent.query, valueUpdate: 'keyup'" autocomplete="off">
                  <input type="text" class="display-none form-control" placeholder="filter">
                  <span id="recent-search-clearer" data-bind="visible: recent.query().length > 0" class="glyphicon glyphicon-remove form-control-feedback"></span>
                </div>
              </form>
            </div>

            <ul data-bind="foreach: recent.recentFiltered" id="recent-list" class="yscroll list">
              <li data-bind="attr: { id: 'r'+$index() }, event: { click: openMainPageFromLanding }" >
                <div class="thumb">
                  <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                </div>
                <div class="list-item">
                  <strong><span data-bind="text: tag"></span> - <span data-bind='text: description'></span></strong>
                  <br />
                  <p>
                    <span data-bind='text: type'></span> - <span data-bind='text: type_description'></span>
                  </p>
                </div>
              </li>

            </ul>
            <!-- recent-list -->

          </div>
          <!-- recent-container -->

          <div id="new-container" class="rns-container">

            <ul data-bind="foreach: types.types" id="new-list" class="yscroll list">

              <li class="n" data-bind="attr: { id: 'n'+$index() }, event: { click: openConfigurePageFromLanding }" >
                <div class="thumb">
                  <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                </div>
                <div class="list-item">
                  <strong><span data-bind="text: name"></span> - <span data-bind='text: description'></span></strong>
                </div>
              </li>

            </ul>
            <!-- new-list -->

          </div>
          <!-- new-container -->

          <div id="server-container" class="rns-container">

            <ul data-bind="foreach: servers.servers" id="server-list" class="yscroll list">

              <li data-bind="if: active">
                <div class="thumb">
                  <img alt="server thumbnail" data-bind="attr: { src: uuid()+'/icon.png' }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="server-thumb">
                </div>
                <div class="server-item list-item">
                  <strong><span data-bind="text: name"></span></strong>
                  <br />
                  <p>
                    <span data-bind='text: description'></span>
                  </p>
                  <p>
                    <span data-bind='text: server'></span>
                  </p>
                </div>
              </li>

              <li data-bind="ifnot: active, attr: { id: uuid }, event: { click: switchServer }">
                <div class="thumb">
                  <img alt="server thumbnail" data-bind="attr: { src: uuid()+'/icon.png' }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="server-thumb">
                </div>
                <div class="server-item list-item" data-bind="attr: { style: 'background-image: url('+uuid()+'/background-landing.jpg)'}">
                  <strong><span data-bind="text: name"></span></strong>
                  <br />
                  <p>
                    <span data-bind='text: description'></span>
                  </p>
                  <button type="button" class="btn btn-default disabled">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                  </button>
                </div>
              </li>

            </ul>
            <!-- server-list -->

          </div>
          <!-- server-container -->

        </div>
        <!-- tab-container -->
      </div>
      <!-- landing -->

      <div id="main-page">
        <div class="box" data-bind="attr: { style: 'background-image: url('+servers.activeServer().uuid()+'/background-landing.jpg)'}">
          <div id="input-open" class="lid-retracted vcenter lefty input" onclick="showInputContainer();">
            i
            <br/>
            n
            <br/>
            p
            <br/>
            u
            <br/>
            t
          </div>

          <div id="output-open" class="lid-retracted vcenter righty output" onclick="showOutputContainer();">
            o
            <br/>
            u
            <br/>
            t
            <br/>
            p
            <br/>
            u
            <br/>
            t
          </div>
        </div>
        <!-- box -->

        <div class="container-fluid no-padding box1">

          <div id="navigation" class="row no-margin">
            <div class="center col-xs-2 col-sm-2 no-padding">
              <button id="parent-open-main" type="button" class="btn btn-default" onclick="openLandingPageFromMain();">
                <span class="glyphicon glyphicon-chevron-left"></span>
                Home
              </button>
            </div>
            <div class="center col-xs-8 col-sm-8 no-padding">
              <button id="info-toggle" type="button" class="btn btn-danger" onclick="toggleInfoContainer();" style="outline: none;">
                my model
              </button>
            </div>
            <div class="center col-xs-2 col-sm-2 no-padding">
              <button id="children-toggle" type="button" class="btn btn-default">
                <span id="gl-children" class="glyphicon glyphicon-chevron-down"></span>
              </button>
            </div>
          </div>
          <!-- navigation -->

          <div id="main" class="row no-margin">

            <div id="input-container" class="col-xs-10 col-sm-5 no-padding">

              <div id="input-close" class="lid-extended vcenter righty" onclick="hideInputContainer();">
                i
                <br/>
                n
                <br/>
                p
                <br/>
                u
                <br/>
                t
              </div>

              <form class="form" style="margin: 0.5em;">
                <div class="form-group has-feedback">
                  <input id="input-search" type="text" class="form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <input type="text" class="display-none form-control" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <span id="input-search-clearer" data-bind="visible: query().length > 0" class="glyphicon glyphicon-remove form-control-feedback"></span>
                </div>
              </form>

              <div id="input-box">
                <input id="number" type="number" class="form-control" style="width:75%; float: left;">
                <span class="righty"></span>
                <input id="range" type="range">
              </div>

              <ul data-bind="foreach: inputs" id="input-list" class="yscroll list">

                <li data-bind="attr: { id: $index() }, event: { click: toggleInputContainer }" class="i">
                  <strong><span data-bind="text: fulltag"></span> – <span data-bind='text: description'></span></strong>
                  <div class="ro">
                    <span data-bind="text: value"></span>
                    <span class="righty" data-bind="text: units"></span>
                  </div>
                </li>

              </ul>
              <!-- input-list -->

            </div>
            <!-- input-container -->

            <div id="center" class="col-xs-12 col-sm-12">
              <div id="info-container" class="yscroll">
                <dl id="info-list">
                  <dt>
                    model
                  </dt>
                  <dd>
                    my model - pasteurization plant x y z optimal operation
                  </dd>
                  <dt>
                    full tag
                  </dt>
                  <dd>
                    A:B:C:my model
                  </dd>
                  <dt>
                    type
                  </dt>
                  <dd>
                    PasteurHTST15_milkWhole - High Temperature Short Time Pasteurization 15 s of whole milk
                  </dd>
                  <dt>
                    created
                  </dt>
                  <dd>
                    2014-06-30 12:22 CET
                  </dd>
                  <dt>
                    last modified
                  </dt>
                  <dd>
                    2014-07-02 19:30 CET
                  </dd>
                  <dt>
                    status
                  </dt>
                  <dd>
                    results present with errors
                  </dd>

                </dl>
                <!-- info-list -->

                <hr/>

                <strong class="center">Messages:</strong>
                <dl data-bind="foreach: messages" id="messages-list">

                  <dt>
                    <span data-bind="text: type"></span> – <span data-bind="text: message_text"></span>
                  </dt>
                  <dd>
                    <span data-bind="text: fulltag"></span>
                  </dd>

                </dl>
                <!-- messages-list -->

              </div>
              <!-- info-container -->

              <div id="children" class="yscroll">

                <ul data-bind="foreach: children" id="children-list">

                  <li data-bind="attr: { id: id }, event: { click: openChild }" >
                    <div class="thumb">
                      <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                    </div>
                    <div class="list-item">
                      <strong><span data-bind="text: tag"></span> – <span data-bind='text: description'></span></strong>
                      <br />
                      <p>
                        <span data-bind='text: type'></span> - <span data-bind='text: type_description'></span>
                      </p>
                    </div>
                  </li>

                </ul>
                <!-- children-list -->

              </div>
              <!-- children -->
            </div>
            <!-- center -->

            <div id="output-container" class="col-xs-10 col-sm-5 no-padding">

              <div id="output-close" class="lid-extended vcenter lefty" onclick="hideOutputContainer();">
                o
                <br/>
                u
                <br/>
                t
                <br/>
                p
                <br/>
                u
                <br/>
                t
              </div>

              <form class="form" style="margin: 0.5em;">
                <div class="form-group has-feedback">
                  <input id="output-search" type="text" class="form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <input type="text" class="display-none form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <span id="output-search-clearer" data-bind="visible: query().length > 0" class="glyphicon glyphicon-remove form-control-feedback"></span>
                </div>
              </form>

              <ul data-bind="foreach: outputs" id="output-list" class="yscroll list">

                <li class="o">
                  <strong><span data-bind="text: fulltag"></span> – <span data-bind='text: description'></span></strong>
                  <div class="ro">
                    <span data-bind="text: value"></span>
                    <span class="righty" data-bind="text: units"></span>
                  </div>
                </li>

              </ul>
              <!-- output-list -->

            </div>
            <!-- output-container -->
          </div>
          <!-- main -->

          <div id="toolbar" class="row no-margin">
            <div class="col-xs-12 col-sm-12 no-padding">
              <button disabled id="calculate" type="button" class="btn btn-default" onclick="launch_calculation();">
                <span class="glyphicon glyphicon-play"></span>
              </button>
              <button type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-share"></span>
              </button>
              <button id="btnUndo" type="button" class="btn btn-default" onclick="undoManager.undo();" disabled >
                <img src="images/undo.png" alt="undo" class="icon" />
              </button>
              <button id="btnRedo" type="button" class="btn btn-default" onclick="undoManager.redo();" disabled >
                <img src="images/undo.png" alt="redo" class="icon mirror" />
              </button>
            </div>
          </div>
          <!-- toolbar -->
        </div>
      </div>
      <!-- main-page -->

      <div id="configure-page" class="h100">
        <div id="navigation-configure" class="row no-margin">

          <div class=" center col-xs-2 col-sm-2 no-padding">
            <button id="parent-open-configure" type="button" class="btn btn-default" onclick="window.open('index.html','_self')">
              <span class="glyphicon glyphicon-chevron-left"></span>
              Home
            </button>
          </div>
          <div class="center col-xs-8 col-sm-8 no-padding">
            <button id="create" type="button" form="configure-form" class="btn btn-default" onclick="openMainPageFromConfigure();">
              Crea
            </button>
          </div>
          <div class=" center col-xs-2 col-sm-2 no-padding"></div>
        </div>
        <!-- navigation-configure -->

        <div id="configure-container" class="form-horizontal yscroll" data-bind="">

          <div class="box1">

            <form id="configure-form" class="form-horizontal list" data-bind="with:configure">
              <div class="row">
                <div class="col-sm-8">
                  <h2 id="type" data-bind="text:name"></h2>
                  <h3 data-bind="text:description"></h3>
                </div>
                <div class="col-sm-4">
                  <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb6">
                </div>
              </div>
              <fieldset>
                <div class="form-group has-feedback">
                  <div class="col-xs-12 col-sm-12">
                    <input data-bind="value: instance_tag" autofocus required id="tag" type="text" maxlength="50" placeholder="tag" class="form-control">
                    <span data-bind="visible: instance_tag().length > 0" id="tag-clearer" class="glyphicon glyphicon-remove form-control-feedback"></span>
                  </div>
                </div>
                <div class="form-group has-feedback">
                  <div class="col-xs-12 col-sm-12">
                    <input data-bind="value: instance_description" id="description" type="text" maxlength="255" placeholder="description" class="form-control">
                    <span data-bind="visible: instance_description().length > 0" id="description-clearer" class="glyphicon glyphicon-remove form-control-feedback"></span>
                  </div>
                </div>
              </fieldset>
              <fieldset data-bind="visible: stringOptions().length > 0">
                <legend>
                  String options:
                </legend>
                <!-- ko foreach: stringOptions -->
                <div class="form-group">
                  <label data-bind="text: name, attr: { for: 'string-option'+$index() }" class="col-sm-2 control-label"></label>
                  <div class="col-sm-10">
                    <select data-bind="attr: { id: 'string-option'+$index() }, foreach: options, selectedIndex: selected" class="form-control">
                      <option data-bind="text: name">option</option>
                      <!-- attr: {selected: selected},  -->
                    </select>
                  </div>
                  <small class="col-sm-12" data-bind="text: description"></small>
                  <small class="col-sm-12" data-bind="text: selected_description"></small>
                </div>
                <!-- /ko -->
              </fieldset>
              <fieldset data-bind="visible: integerOptions().length > 0">
                <legend>
                  Integer options:
                </legend>
                <!-- ko foreach: integerOptions -->
                <div class="form-group">
                  <label data-bind="text: name, attr: { for: 'integer-option'+$index() }" class="col-sm-2 control-label"></label>
                  <div class="col-sm-10">
                    <input data-bind="attr: { id: 'integer-option'+$index(), min: min, max: max, value: value }" type="number"
                    step="1" class="form-control" />
                  </div>
                  <small class="col-sm-12"> <span data-bind="text: description"></span> - minimum: <span data-bind="text: min"></span> maximum: <span data-bind="text: max"></span> </small>
                </div>
                <!-- /ko -->
              </fieldset>
            </form>
            <!-- configure-form -->
          </div>
          <!-- box1 -->

          <!-- <pre data-bind="text: JSON.stringify(ko.toJS($data), null, 3)"></pre> -->

        </div>
        <!-- configure-container -->

      </div>
      <!-- configure-page -->
    </div>
    <!-- background -->
  </body>
</html>