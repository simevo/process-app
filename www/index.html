<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />

    <title>Simevo process app</title>
    <link href="css/custom.css" rel="stylesheet"/>
    <link href="css/loader.css" rel="stylesheet"/>
    <link href="css/overrides.css" rel="stylesheet" />

    <!-- Apache Cordova -->
    <script type="text/javascript" src="cordova.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Third-party JS -->
    <script type="text/javascript" src="js/knockout-3.1.0.js"></script>
    <script type="text/javascript" src="js/knockout.mapping.js"></script>
    <script type="text/javascript" src="js/knockout-projections.min.js"></script>
    <script type="text/javascript" src="js/undomanager.js"></script>

    <!-- Simevo-specific JS -->
    <script type="text/javascript" src="js/Landing.js"></script>
    <script type="text/javascript" src="js/Configure.js"></script>
    <script type="text/javascript" src="js/Main.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

  </head>
  <body>

    <!-- script src="js/three.min.js"></script -->
    <!-- script src="js/JSONLoader.js"></script -->
    <!-- script src="js/OrbitControls.js"></script -->
    <!-- script src="js/Detector.js"></script -->
    <!-- script src="js/3d.js"></script -->

    <div id="background" class="yscroll" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=')">

      <div id="landing-page">

        <div id="logo">
          <!-- TODO remove this button for release version ! -->
          <button type="button" class="btn btn-success" onclick="reset_local_storage();">
            <span class="glyphicon glyphicon-trash"></span>
          </button>

        </div>
        <!-- logo -->

        <div id="tab-container">
          <ul class="nav nav-tabs">
            <li  class="active">
              <a id="service-open" class="tab"><strong>Services</strong></a>
            </li>
            <li>
              <a id="new-open" class="tab"><strong>New</strong></a>
            </li>
            <li data-bind="visible: recent.recent().length > 0">
              <a id="recent-open" class="tab"><strong>Recent</strong></a>
            </li>
          </ul>
          <!-- navigation -->

          <div id="recent-container" class="rns-container" data-bind="visible: recent.recent().length > 0">
            <div id="container-recent-search" class="container">
              <form class="form">
                <div class="form-group has-feedback">
                  <input id="recent-search" type="text" class="form-control" placeholder="filter" data-bind="value: recent.query, valueUpdate: 'keyup'" autocomplete="off">
                  <input type="text" class="display-none form-control" placeholder="filter">
                  <span id="recent-search-clearer" class="glyphicon glyphicon-remove form-control-feedback" data-bind="visible: recent.query().length > 0"></span>
                </div>
              </form>
            </div>

            <ul data-bind="foreach: recent.recentFiltered" id="recent-list" class="yscroll list">
              <li style="position: relative;" data-bind="attr: { id: 'r'+$index() }, click: openMainPageFromLanding" >
                <div class="thumb">
                  <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                </div>
                <div class="list-item" data-bind="click: openMainPageFromLanding, clickBubble: false">
                  <strong><span data-bind="text: tag"></span><span> - </span><span data-bind="text: description"></span><span data-bind="visible: description().length == 0, text: format_date(modified_at())"></span></strong>
                  <br />
                  <p class="secondary">
                    <span data-bind="text: type"></span> - <span data-bind="text: type_description"></span>
                  </p>
                  
                  <span class="glyphicon glyphicon-remove-circle" style="position: absolute; right: 0.5em; top: 0.5em;" data-bind="click: $root.remove_recent, clickBubble: false"></span>
                </div>
              </li>

            </ul>
            <!-- recent-list -->

          </div>
          <!-- recent-container -->

          <div id="new-container" class="rns-container">

            <ul data-bind="foreach: types.types" id="new-list" class="yscroll list">

              <li class="n" data-bind="attr: { id: 'n'+$index() }, event: { click: openConfigurePageFromLanding }" >
                <div class="thumb">
                  <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                </div>
                <div class="list-item">
                  <strong><span data-bind="text: name"></span></strong><span class="secondary"> – </span><span class="secondary" data-bind="text: description"></span>
                </div>
              </li>

            </ul>
            <!-- new-list -->

          </div>
          <!-- new-container -->
          <div id="service-container" class="rns-container">
            <ul id="service-list" class="yscroll list">
              <li>
                <div data-bind="style: { backgroundColor: services.activeService().color }" class="service-thumb">
                  <img alt="service thumbnail" data-bind="attr: { src: prefix() + services.activeService().service_uuid() +'/icon.svg' }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="service-thumb">
                </div>
                <div class="service-item list-item">
                  <strong><span data-bind="text: services.activeService().name()">placeholder</span></strong>
                  <!-- ko if: services.activeService().dead -->
                  <div style="position: absolute; right: 1.5em; top: 2em; width: 44px; height: 39px; text-align: center; vertical-align: middle;">
                    <span class="glyphicon glyphicon-warning-sign" style="color: red;"></span>
                  </div>
                  <!-- /ko -->
                  <br />
                  <p class="secondary">
                    <span data-bind="text: services.activeService().description()">placeholder</span>
                  </p>
                  <p class="secondary">
                    <span data-bind="text: services.activeService().url()">placeholder</span>
                  </p>
                </div>
              </li>
              <!-- ko foreach: services.services -->
              <!-- ko ifnot: active -->
              <li class="clearfix" data-bind="attr: { id: service_uuid }, event: { click: switchService }">
                <div data-bind="style: { backgroundColor: color }" class="service-thumb">
                  <img alt="service thumbnail" data-bind="attr: { src: $root.prefix() + service_uuid()+'/icon.svg' }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="service-thumb">
                </div>
                <div class="service-item list-item" data-bind="attr: { style: 'background-image: url('+$root.prefix() + service_uuid()+'/background.jpg); position: relative;'}">
                  <div id="services-veiling"></div>
                  <div style="z-index: 100; position: relative;">
                    <strong style="float: left;"><span data-bind="text: name"></span></strong>
                    <button type="button" class="btn btn-default disabled" style="position: absolute; right: 0.5em; top: 0.5em;">
                      <span class="glyphicon glyphicon-remove-circle"></span>
                    </button>
                    <!-- ko if: dead -->
                    <div style="position: absolute; right: 0.5em; top: 3em; width: 44px; height: 39px; text-align: center; vertical-align: middle;">
                      <span class="glyphicon glyphicon-warning-sign" style="color: red;"></span>
                    </div>
                    <!-- /ko -->
                    <br />
                    <p class="secondary">
                      <span data-bind="text: description"></span>
                    </p>
                  </div>
                </div>
              </li>
              <!-- /ko -->
              <!-- /ko -->
              <li>
                <div class="service-thumb" style="background-color: #007878;">
                  <img alt="service thumbnail" src="images/logo.svg" class="service-thumb">
                </div>
                <div class="service-item list-item" style="background-color: #007878;">
                  <strong>[ Your own service here ... ]</strong>
                  <br />
                  <p class="secondary">
                    To find out how please <a href="mailto:info@simevo.com">contact us</a>
                  </p>
                </div>
              </li>
            </ul>
            <!-- service-list -->

          </div>
          <!-- service-container -->

        </div>
        <!-- tab-container -->

      </div>
      <!-- landing -->

      <div id="main-page">
        <!-- data-bind="attr: { style: 'background-image: url('+services.activeService().service_uuid()+'/background.jpg)'}" -->
        <div id="box">
          <div id="input-open" class="lid-retracted vcenter lefty" onclick="showInputContainer();">
            <span class="glyphicon glyphicon-pencil vcenter"></span>
          </div>
          <div id="output-open" class="lid-retracted vcenter righty" onclick="showOutputContainer();">
            <span class="glyphicon glyphicon-list-alt vcenter"></span>
          </div>
        </div>
        <!-- box -->

        <div id="image-container" class="center"></div>

        <div class="container-fluid no-padding box1">

          <div data-bind="style: { backgroundColor: service_color }" id="navigation" class="row no-margin">
            <div class="col-xs-4 col-sm-2 no-padding">
              <button id="parent-open-main" type="button" class="btn btn-default margin-left" data-bind="click: clickAction">
                <span>
                  <span class="glyphicon glyphicon-chevron-left"></span>
                  <span data-bind="text: homeText"></span>
                </span>
              </button>
            </div>
            <div class="center col-xs-4 col-sm-8 no-padding">
              <button id="info-toggle" type="button" class="btn btn-default" onclick="toggleInfoContainer();" style="outline: none;" data-bind="attr: { 'class': (errors0() > 0 ? 'btn btn-danger' : (warnings0() > 0 ? 'btn btn-warning' : 'btn btn-success')) }">
                <span data-bind="text: Tag"></span>
              </button>
            </div>
            <div class="col-xs-4 col-sm-2 no-padding" style="text-align: right;">
              <button id="children-toggle" type="button" class="btn btn-default margin-right" data-bind="visible: hasChildren">
                <span id="gl-children" class="glyphicon glyphicon-chevron-down"></span>
              </button>
            </div>
          </div>
          <!-- navigation -->
          <div id="main" class="row no-margin">

            <div id="input-container" class="col-xs-10 col-sm-5 no-padding">

              <div id="input-close" class="lid-extended vcenter righty" onclick="hideInputContainer();">
                <span class="glyphicon glyphicon-pencil vcenter"></span>
              </div>
              <form class="form" style="margin: 0.5em;">
                <div class="form-group has-feedback">
                  <input id="input-search" type="text" class="form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <input type="text" class="display-none form-control" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <span id="input-search-clearer" data-bind="visible: query().length > 0" class="glyphicon glyphicon-remove form-control-feedback"></span>
                </div>
              </form>

              <div id="input-box">
                <input id="number" type="number" class="form-control number-container" style="width:75%; float: left;">
                <span class="righty secondary"></span>
                <input id="range" type="range">
              </div>

              <ul data-bind="foreach: inputs" id="input-list" class="yscroll list">

                <li data-bind="attr: { id: $index() }, event: { click: toggleInputContainer }" class="i">
                  <strong><span data-bind="text: fulltag"></span></strong><span class="secondary"> – </span><span class="secondary" data-bind="text: description"></span>
                  <div class="ro">
                    <span data-bind="text: value"></span>
                    <span class="righty secondary" data-bind="text: units"></span>
                  </div>
                </li>

              </ul>
              <!-- input-list -->

            </div>
            <!-- input-container -->

            <div id="center" class="col-xs-12 col-sm-12">
              <div id="info-container" class="yscroll">
                <dl id="info-list">
                  <dt>
                    <span data-bind="text: fullTag"></span>
                  </dt>
                  <dd>
                    <span class="secondary" data-bind="text: Description"></span>
                  </dd>
                  <dt>
                    <span data-bind="text: Type"></span>
                  </dt>
                  <dd>
                    <span class="secondary" data-bind="text: typeDescription"></span>
                  </dd>
                  <dt>
                    created:
                  </dt>
                  <dd>
                    <span data-bind="text: createdAt"></span>
                  </dd>
                  <dt>
                    last modified:
                  </dt>
                  <dd>
                    <span data-bind="text: modifiedAt"></span>
                  </dd>
                  <dt>
                    status:
                  </dt>
                  <dd>
                  <!-- ko if: errors() > 0 -->
                    <span>results with errors</span>
                  <!-- /ko -->
                  <!-- ko if: errors() == 0 && warnings() > 0 -->
                    <span>results with warnings</span>
                  <!-- /ko -->
                  <!-- ko if: errors() == 0 && warnings() == 0 -->
                    <span>results without warnings or errors</span>
                  <!-- /ko -->
                  </dd>

                </dl>
                <!-- info-list -->

                <!-- ko if: errors() > 0 -->
                <hr/>
                <strong style="padding-left: 18px">Error messages:</strong>
                <ul class="messages" data-bind="foreach: error_messages">
                  <li class="secondary" data-bind="text: $data"></li>
                </ul>
                <!-- /ko -->

                <!-- ko if: warnings() > 0 -->
                <hr/>
                <strong style="padding-left: 18px">Warning messages:</strong>
                <ul class="messages" data-bind="foreach: warning_messages">
                  <li class="secondary" data-bind="text: $data"></li>
                </ul>
                <!-- /ko -->

                <!-- messages-list -->
              </div>
              <!-- info-container -->

              <div id="children" class="yscroll" data-bind="visible: hasChildren">

                <ul data-bind="foreach: children" id="children-list">

                  <li data-bind="attr: { id: id }, event: { click: openChild }" >
                    <div class="thumb">
                      <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb3">
                    </div>
                    <div class="list-item">
                      <strong><span data-bind="text: tag"></span></strong><span> – </span><span data-bind="text: description"></span>
                      <br />
                      <p class="secondary">
                        <span data-bind="text: type"></span> - <span data-bind="text: type_description"></span>
                      </p>
                    </div>
                  </li>

                </ul>
                <!-- children-list -->

              </div>
              <!-- children -->
            </div>
            <!-- center -->

            <div id="output-container" class="col-xs-10 col-sm-5 no-padding">

              <div id="output-close" class="lid-extended vcenter lefty" onclick="hideOutputContainer();">
                <span class="glyphicon glyphicon-list-alt vcenter"></span>
              </div>

              <form class="form" style="margin: 0.5em;">
                <div class="form-group has-feedback">
                  <input id="output-search" type="text" class="form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <input type="text" class="display-none form-control" placeholder="filter" autocomplete="off" data-bind="value: query, valueUpdate: 'keyup'">
                  <span id="output-search-clearer" data-bind="visible: query().length > 0" class="glyphicon glyphicon-remove form-control-feedback"></span>
                </div>
              </form>

              <ul data-bind="foreach: outputs" id="output-list" class="yscroll list">

                <li class="o">
                  <strong><span data-bind="text: fulltag"></span></strong><span class="secondary"> – </span><span class="secondary" data-bind="text: description"></span>
                  <div class="ro">
                    <span data-bind="text: value"></span>
                    <span class="righty secondary" data-bind="text: units"></span>
                  </div>
                </li>

              </ul>
              <!-- output-list -->

            </div>
            <!-- output-container -->
          </div>
          <!-- main -->

          <div data-bind="style: { backgroundColor: service_color }" id="toolbar" class="row no-margin">
            <div class="col-xs-12 col-sm-12 no-padding">
              <button disabled id="calculate" type="button" class="btn btn-default" onclick="launch_calculation();">
                <span class="glyphicon glyphicon-play"></span>
              </button>
              <button id="btnShare" type="button" class="btn btn-default" onclick="socialShare();">
                <span class="glyphicon glyphicon-share"></span>
              </button>
              <button id="btnUndo" type="button" class="btn btn-default" onclick="undoManager.undo();" disabled >
                <img src="images/undo.png" alt="undo" class="icon" />
              </button>
              <button id="btnRedo" type="button" class="btn btn-default" onclick="undoManager.redo();" disabled >
                <img src="images/undo.png" alt="redo" class="icon mirror" />
              </button>
            </div>
          </div>
          <!-- toolbar -->
        </div>
      </div>
      <!-- main-page -->

      <div id="configure-page" class="h100">
        <div data-bind="style: { backgroundColor: service_color }" id="navigation-configure" class="row no-margin">

          <div class="col-xs-4 col-sm-2 no-padding">
            <button id="parent-open-configure" type="button" class="btn btn-default margin-left" onclick="openLandingPageFromConfigure()">
              <span class="glyphicon glyphicon-chevron-left"></span>
              Home
            </button>
          </div>
          <div class="center col-xs-4 col-sm-8 no-padding" data-bind="with: configuration">
            <button id="create" type="button" form="configure-form" class="btn btn-default" onclick="openMainPageFromConfigure();" data-bind="disable: !isValid()">
              Create
            </button>
          </div>
          <div class="col-xs-4 col-sm-2 no-padding"></div>
        </div>
        <!-- navigation-configure -->
        <div id="configure-veiling" class="yscroll">
          <div id="configure-container" class="form-horizontal">

            <div class="box1">

              <form id="configure-form" class="form-horizontal list" data-bind="with: configuration">
                <div class="row">
                  <div class="col-sm-8">
                    <h2 id="type" data-bind="text: name">placeholder</h2>
                    <h3 data-bind="text: description">placeholder</h3>
                  </div>
                  <div class="col-sm-4">
                    <img alt="model thumbnail" data-bind="attr: { src: icon }" src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" class="thumb6">
                  </div>
                </div>
                <fieldset>
                  <div class="form-group has-feedback" data-bind="attr: { 'class': instance_tag.isValid() ? 'form-group has-feedback' : 'form-group has-feedback has-error' }">                  
                    <div class="col-xs-12 col-sm-12">
                      <input data-bind="value: instance_tag" autofocus required id="tag" type="text" maxlength="50" placeholder="tag" class="form-control">
                      <span data-bind="visible: instance_tag().length > 0" id="tag-clearer" class="glyphicon glyphicon-remove form-control-feedback"></span>
                      <span class="secondary control-label" data-bind="text: instance_tag.validationMessage()"></span>
                    </div>
                  </div>
                  <div class="form-group has-feedback" data-bind="attr: { 'class': instance_description.isValid() ? 'form-group has-feedback' : 'form-group has-feedback has-error' }">
                    <div class="col-xs-12 col-sm-12">
                      <input data-bind="value: instance_description" id="description" type="text" maxlength="255" placeholder="description" class="form-control">
                      <span data-bind="visible: instance_description().length > 0" id="description-clearer" class="glyphicon glyphicon-remove form-control-feedback"></span>
                      <span class="secondary control-label" data-bind="text: instance_description.validationMessage()"></span>
                    </div>
                  </div>
                </fieldset>
                <fieldset data-bind="visible: stringOptions().length > 0">
                  <legend>
                    String options:
                  </legend>
                  <!-- ko foreach: stringOptions -->
                  <div class="form-group list-item-configure">
                    <label data-bind="text: name, attr: { for: 'string-option'+$index() }" class="col-sm-2 col-xs-12 control-label"></label>
                    <div class="col-sm-10 col-xs-12">
                      <select data-bind="attr: { id: 'string-option'+$index() }, foreach: options, value: selected" class="form-control">
                        <option data-bind="text: name">option</option>
                      </select>
                    </div>
                    <small class="col-sm-2 col-xs-12" data-bind="text: description"></small>
                    <small class="col-sm-10 col-xs-12" data-bind="text: selected_description"></small>
                  </div>
                  <!-- /ko -->
                </fieldset>
                <fieldset data-bind="visible: integerOptions().length > 0">
                  <legend>
                    Integer options:
                  </legend>
                  <!-- ko foreach: integerOptions -->
                  <div class="form-group list-item-configure">
                    <label data-bind="text: name, attr: { for: 'integer-option'+$index() }" class="col-sm-2 col-xs-12 control-label"></label>
                    <div class="col-sm-10 col-xs-12">
                      <input data-bind="attr: { id: 'integer-option'+$index(), min: min, max: max, value: value }" type="number"
                      step="1" class="form-control" />
                    </div>
                    <small class="col-sm-12 col-xs-12"> <span data-bind="text: description"></span> - minimum: <span data-bind="text: min"></span> maximum: <span data-bind="text: max"></span> </small>
                  </div>
                  <!-- /ko -->
                </fieldset>
              </form>
              <!-- configure-form -->
            </div>
            <!-- box1 -->

          </div>
        </div>
        <!-- configure-container -->

      </div>
      <!-- configure-page -->

    </div>
    <!-- background -->

    <div style="background-color: #000000; opacity: 0.6; height: 100%; width: 100%; position: absolute; text-align: center; top: 0px; display: block; z-index: 2000;" id="box2">
      <div class="ajax-loader"></div>
    </div>
  </body>
</html>